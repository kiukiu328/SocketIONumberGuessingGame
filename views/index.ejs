<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlucky</title>
    <link rel="stylesheet" href="style.css">
    <script>

        window.onload = () => {
            if (!localStorage.getItem('roomID')) {
                localStorage.setItem('roomID', '')
            }
            if (!localStorage.getItem('playerName')) {
                localStorage.setItem('playerName', 'anonymous')
            }
            document.getElementById('playerName').value = localStorage.getItem('playerName')

            document.getElementById('room-id').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    window.location.href = './game'
                }
            })
            document.getElementById('create-room').onclick = () => {
                localStorage.setItem('roomID', '')
                console.log('create room')
                window.location.href = './game?playerName=' + document.getElementById('playerName').value
            }
            document.getElementById('join-room').onclick = () => {
                let roomID = document.getElementById('room-id').value
                if (roomID == '') {
                    alert('Please enter room code or create a new room')
                    return
                }
                localStorage.setItem('roomID',roomID)
                window.location.href = './game'
            }
        }
        function UpdateName() {
            localStorage.setItem('playerName', document.getElementById('playerName').value)
        }

    </script>
</head>

<body>
    <div id="home-page">
        <h1>Welcome to play the Unlucky</h1>
        <p>
            Please enter your name for other players to see:
            <input type="text" name="playerName" placeholder="your name" id="playerName" onchange="UpdateName()">

        </p>

        <div>
            <input type="text" name="room" placeholder="room code" id="room-id">
            <button id="join-room">Join Room</button>
        </div>
        <button id="create-room" style="padding: 2vmin; margin-top: 5vmin;">Create Room</button>

    </div>
</body>

</html>